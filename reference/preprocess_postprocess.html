<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Preprocessing and postprocessing of input immune repertoire files — make_default_preprocessing • immundata</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Preprocessing and postprocessing of input immune repertoire files — make_default_preprocessing"><meta name="description" content="Preprocessing and postprocessing of input immune repertoire files"><meta property="og:description" content="Preprocessing and postprocessing of input immune repertoire files"><!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=G-YHL2JHZTFV"></script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-YHL2JHZTFV');
</script></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-primary" data-bs-theme="dark" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">immundata</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.4.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../..."></a></li>
<li class="nav-item"><a class="nav-link" href="../..."></a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://immunomind.com">ImmunoMind</a></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/immunomind/immundata" aria-label="GitHub"><span class="fa fa-github"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Preprocessing and postprocessing of input immune repertoire files</h1>
      <small class="dont-index">Source: <a href="https://github.com/immunomind/immundata/blob/main/R/io_repertoires_processing.R" class="external-link"><code>R/io_repertoires_processing.R</code></a></small>
      <div class="d-none name"><code>preprocess_postprocess.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Preprocessing and postprocessing of input immune repertoire files</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">make_default_preprocessing</span><span class="op">(</span>format <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"airr"</span>, <span class="st">"10x"</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">make_default_postprocessing</span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">make_exclude_columns</span><span class="op">(</span>cols <span class="op">=</span> <span class="fu"><a href="imd_schema.html">imd_drop_cols</a></span><span class="op">(</span><span class="st">"airr"</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">make_productive_filter</span><span class="op">(</span>col_name <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"productive"</span><span class="op">)</span>, truthy <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">make_barcode_prefix</span><span class="op">(</span>prefix_col <span class="op">=</span> <span class="st">"Prefix"</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-format">format<a class="anchor" aria-label="anchor" href="#arg-format"></a></dt>
<dd><p>For <code>make_default_preprocessing()</code>, a character string specifying
the input data format. Currently supports <code>"airr"</code> (default) or <code>"10x"</code>.
This determines the default set of columns to exclude and the values
considered "productive".</p></dd>


<dt id="arg-cols">cols<a class="anchor" aria-label="anchor" href="#arg-cols"></a></dt>
<dd><p>For <code>make_exclude_columns()</code>, a character vector of column names
to be removed from the dataset. Defaults to <code>imd_drop_cols("airr")</code>.
If empty, the returned function will not remove any columns.</p></dd>


<dt id="arg-col-name">col_name<a class="anchor" aria-label="anchor" href="#arg-col-name"></a></dt>
<dd><p>For <code>make_productive_filter()</code>, a character vector of potential
column names that indicate sequence productivity (e.g., <code>"productive"</code>).
The first matching column found in the dataset will be used.</p></dd>


<dt id="arg-truthy">truthy<a class="anchor" aria-label="anchor" href="#arg-truthy"></a></dt>
<dd><p>For <code>make_productive_filter()</code>, a value or vector of values
that signify a productive sequence in the <code>col_name</code> column.
Can be a logical <code>TRUE</code> (default for "airr" format) or a character vector
of strings (e.g., <code>c("true", "TRUE", "True", "t", "T", "1")</code> for "10x" format).</p></dd>


<dt id="arg-prefix-col">prefix_col<a class="anchor" aria-label="anchor" href="#arg-prefix-col"></a></dt>
<dd><p>For <code>make_barcode_prefix()</code>, the name of the column in the
dataset that contains the prefix string to be added to each cell barcode.
Defaults to <code>"Prefix"</code>. The barcode column itself is identified internally
via <code>imd_schema("barcode")</code>.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>Each <code>make_*</code> function returns a <em>new function</em>. This returned function takes
a <code>dataset</code> as its first argument and <code>...</code> for any additional arguments,
and performs the specific processing step.
<code>make_default_preprocessing()</code> and <code>make_default_postprocessing()</code> return a
<em>named list</em> of such functions.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>This collection of "maker" functions generates common preprocessing and
postprocessing function steps tailored for immune repertoire data.
Each <code>make_*</code> function returns a new function that can then be applied
to a dataset.</p>
<p>These functions are designed to be flexible components in constructing
custom data processing workflows.</p>
<p>The functions generated by these factories typically expect a <code>dataset</code>
(e.g., a <code>duckplyr</code> with annotations) as their first argument
and may accept additional arguments via <code>...</code> (though often unused in the
predefined steps).</p><ul><li><p><code>make_default_preprocessing()</code> and <code>make_default_postprocessing()</code> assemble
a list of such processing functions.</p></li>
<li><p>The individual <code>make_exclude_columns()</code>, <code>make_productive_filter()</code>, and
<code>make_barcode_prefix()</code> functions create specific transformation steps.</p></li>
</ul><p>These steps are often used when reading data to standardize formats, filter
unwanted records, or enrich information like cell barcodes. They are designed
to gracefully handle cases where an operation is not applicable (e.g., a specified
column is not found) by issuing a warning and returning the dataset unmodified.</p>
    </div>
    <div class="section level2">
    <h2 id="functions">Functions<a class="anchor" aria-label="anchor" href="#functions"></a></h2>


<ul><li><p><code>make_default_preprocessing()</code>: Creates a default list of preprocessing
functions suitable for "airr" or "10x" formatted data. This typically
includes steps to exclude unnecessary columns and filter for productive sequences.</p></li>
<li><p><code>make_default_postprocessing()</code>: Creates a default list of postprocessing
functions, such as adding a prefix to cell barcodes.</p></li>
<li><p><code>make_exclude_columns()</code>: Creates a function that, when applied to a
dataset, removes a specified set of columns.</p></li>
<li><p><code>make_productive_filter()</code>: Creates a function that filters a dataset
to retain only rows where sequences are marked as productive, based on
a specified column and set of "truthy" values.</p></li>
<li><p><code>make_barcode_prefix()</code>: Creates a function that prepends a prefix
(sourced from a specified column in the dataset) to the cell barcodes.</p></li>
</ul></div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p><code><a href="read_repertoires.html">read_repertoires()</a></code></p></div>
    </div>

  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by <a href="https://www.linkedin.com/in/vdnaz" class="external-link">Vadim I. Nazarov</a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer></div>





  </body></html>

